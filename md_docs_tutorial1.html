<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SC2API: Tutorial 1: Getting Started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="SC2-Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SC2API
   </div>
   <div id="projectbrief">An API for AI for StarCraft II</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial 1: Getting Started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This first tutorial will cover the following concepts. The source code for this tutorial will be available, in full, at the bottom of this document. We will go over the following concepts.</p>
<ol type="1">
<li>Creating a simple bot class.</li>
<li>Starting a bot game with the SC2 Coordinator class.</li>
<li>Running the game simulation.</li>
</ol>
<h2>Creating A Simple Bot </h2>
<p>Open the file examples/tutorial.cc, this is where you'll be adding your code. It is already setup with the necessary include paths and links the api.</p>
<p>In order to hook into and control game state using this library you'll want to inherit from the Agent class and overwrite the events you are interested in.</p>
<p>You can see a list of all events available to you in <a class="el" href="sc2__client_8h.html" title="The base class for Agent and ReplayObserver. ">sc2_client.h</a>, ClientEvents. We will start simple, our bot will start by printing hello world to console when the game starts so we will only overwrite the OnGameStart event. Add the following code to tutorial.cc.</p>
<div class="fragment"><div class="line">{C++}</div><div class="line">#include &lt;sc2api/sc2_api.h&gt;</div><div class="line"></div><div class="line">#include &lt;iostream&gt;</div><div class="line"></div><div class="line">using namespace sc2;</div><div class="line"></div><div class="line">class Bot : public Agent {</div><div class="line">public:</div><div class="line">    virtual void OnGameStart() final {</div><div class="line">        std::cout &lt;&lt; &quot;Hello, World!&quot; &lt;&lt; std::endl;</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --><blockquote class="doxtable">
<p><a class="el" href="sc2__api_8h_source.html">sc2_api.h</a> is a grab bag of the common headers you need to create a bot. In this series of tutorials you will end up using all the headers included but in your own projects you may choose to include the headers independently. </p>
</blockquote>
<h2>Starting The Game </h2>
<p>Now that we have our bot the next thing to do is start a game with the bot.</p>
<p>The sc2_coordinator is included from <a class="el" href="sc2__api_8h_source.html">sc2_api.h</a>, you will use it to start and manage a game.</p>
<blockquote class="doxtable">
<p>The coordinator acts as a managing class for any running games and replays. Some of its responsibilities include starting the Starcraft 2 executable with the proper game settings, setting up multiplayer and stepping your bots. </p>
</blockquote>
<p>The coordinator requires some preliminary information to properly start and connect to the Starcraft executable.</p>
<p>Replace the <code>main</code> function with the following code:</p>
<div class="fragment"><div class="line">{C++}</div><div class="line">int main(int argc, char* argv[]) {</div><div class="line">    Coordinator coordinator;</div><div class="line">    coordinator.LoadSettings(argc, argv);</div><div class="line"></div><div class="line">    Bot bot;</div><div class="line">    coordinator.SetParticipants({</div><div class="line">        CreateParticipant(Race::Terran, &amp;bot),</div><div class="line">        CreateComputer(Race::Zerg)</div><div class="line">    });</div><div class="line"></div><div class="line">    coordinator.LaunchStarcraft();</div><div class="line">    coordinator.StartGame(sc2::kMapBelShirVestigeLE);</div><div class="line"></div><div class="line">    return 0;</div><div class="line">}</div></div><!-- fragment --><blockquote class="doxtable">
<p>If you have started the retail binary LoadSettings should automatically load necessary settings. Otherwise you can provide the path to the game on the command line. Invoke the binary with &ndash;help to see more detailed instructions. </p>
</blockquote>
<p>In a future tutorial we will cover how you can specify settings as arguments via command line.</p>
<p>At this point you should be able to build and run. The game should start on BelShirVestigeLE with you controlling the Terran against an AI zerg. You should see 'Hello World' print in the console when the game starts and then it will instantly shut down.</p>
<p>By default the game is set to single step when using the library so you must step in manually.</p>
<h2>Running The Simulation </h2>
<p>Now you are ready to run the Starcraft 2 simulation. Overwrite the OnStep function in your bot. For now we will simply print the game loop.</p>
<p>Add to your bot the following function.</p>
<div class="fragment"><div class="line">{C++}</div><div class="line">virtual void OnStep() final {</div><div class="line">    std::cout &lt;&lt; Observation()-&gt;GetGameLoop() &lt;&lt; std::endl;</div><div class="line">}</div></div><!-- fragment --><p>And the following to the bottom of the main function.</p>
<div class="fragment"><div class="line">{C++}</div><div class="line">while (coordinator.Update()) {</div><div class="line">}</div></div><!-- fragment --><p>Your bots OnStep function will be called each time the coordinator steps the simulation forward. The Observation() function returns an interface that contains functions to examine the current game state. We are simply printing the game loop in this example.</p>
<h2>Exercises </h2>
<p>As a couple simple exercises try to do the following -</p>
<ol type="1">
<li>Print the number of minerals/vespene your bot currently has. (Hint: Use the ObservationInterface).</li>
<li>Overwrite and utilize another event from ClientEvents. You can control Terran while the game is simulating, so you could, for example, overwrite OnUnitCreated() and print the tag when an scv is made.</li>
</ol>
<h2>Full Source Code </h2>
<div class="fragment"><div class="line">{C++}</div><div class="line">#include &lt;sc2api/sc2_api.h&gt;</div><div class="line"></div><div class="line">#include &lt;iostream&gt;</div><div class="line"></div><div class="line">using namespace sc2;</div><div class="line"></div><div class="line">class Bot : public Agent {</div><div class="line">public:</div><div class="line">    virtual void OnGameStart() final {</div><div class="line">        std::cout &lt;&lt; &quot;Hello, World!&quot; &lt;&lt; std::endl;</div><div class="line">    }</div><div class="line"></div><div class="line">    virtual void OnStep() final {</div><div class="line">        std::cout &lt;&lt; Observation()-&gt;GetGameLoop() &lt;&lt; std::endl;</div><div class="line">    }</div><div class="line">};</div><div class="line"></div><div class="line">int main(int argc, char* argv[]) {</div><div class="line">    Coordinator coordinator;</div><div class="line">    coordinator.LoadSettings(argc, argv);</div><div class="line"></div><div class="line">    Bot bot;</div><div class="line">    coordinator.SetParticipants({</div><div class="line">        CreateParticipant(Race::Terran, &amp;bot),</div><div class="line">        CreateComputer(Race::Zerg)</div><div class="line">    });</div><div class="line"></div><div class="line">    coordinator.LaunchStarcraft();</div><div class="line">    coordinator.StartGame(sc2::kMapBelShirVestigeLE);</div><div class="line"></div><div class="line">    while (coordinator.Update()) {</div><div class="line">    }</div><div class="line"></div><div class="line">    return 0;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
